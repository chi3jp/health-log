<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>体調メモ＆症状ログ</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <main>
    <h1>体調メモ＆症状ログ</h1>
    <form id="symptom-form">
      <div class="section">
        <div class="section-title">主症状（クリックで選択・複数可）</div>
        <div id="main-symptoms" class="btn-group"></div>
        <input type="text" id="add-main-symptom" placeholder="主症状を追加" />
        <button type="button" id="add-main-symptom-btn">追加</button>
      </div>
      <div id="headache-options" class="section" style="display:none;">
        <div class="section-title">頭のどこが痛みますか？（クリックで複数選択）</div>
        <div id="pain-places" class="btn-group"></div>
        <input type="text" id="add-pain-place" placeholder="場所を追加" />
        <button type="button" id="add-pain-place-btn">追加</button>
        <div class="section-title">痛みの種類（1つ選択）</div>
        <div id="pain-types" class="btn-group"></div>
        <input type="text" id="add-pain-type" placeholder="痛みの種類を追加" />
        <button type="button" id="add-pain-type-btn">追加</button>
        <input type="text" id="pain-type-other" placeholder="その他（自由入力）" style="display: none;" />
      </div>
      <div class="section">
        <div class="section-title">その時していたこと（クリックで複数選択）</div>
        <div id="activities" class="btn-group"></div>
        <div style="display: flex; gap: 8px; margin-top: 8px;">
          <input type="text" id="add-activity" placeholder="行動を追加" style="flex: 1;" />
          <button type="button" id="add-activity-btn">追加</button>
        </div>
        <div class="section-title" style="margin-top: 8px;">メモ</div>
<input type="text" id="activity-other" placeholder="自由にメモを入力してください" style="margin-top: 4px; width: 100%;" />
      <button type="submit" id="save-button" class="submit-btn">記録</button>
    </form>

    <!-- === タブナビゲーション === -->
    <div class="tab-nav">
      <button type="button" class="tab-btn active" data-tab="history-tab">履歴</button>
      <button type="button" class="tab-btn" data-tab="freq-tab">頻度グラフ</button>
    </div>

    <!-- === タブコンテンツ: 履歴 === -->
    <section id="history-tab" class="history-section tab-content active">
      <h2>履歴</h2>
      <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; align-items: center;">
        <button type="button" id="csv-export-btn" class="submit-btn">CSV出力</button>
        <button type="button" id="text-export-btn" class="submit-btn">テキスト出力</button>
        <button type="button" id="clear-history-btn" class="submit-btn danger">履歴をクリア</button>
        <div style="margin-left: auto; display: flex; align-items: center; gap: 5px;">
          <label for="sort-order" style="font-size: 14px;">並び順：</label>
          <select id="sort-order" class="sort-select">
            <option value="newest">新しい順</option>
            <option value="oldest">古い順</option>
          </select>
        </div>
      </div>
      <div id="history"></div>
    </section>
  </main>

  <!-- === タブコンテンツ: 頻度グラフ === -->
  <div id="freq-tab" class="tab-content">
    <div class="chart-container">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;">
        <h2 style="margin:0;">主症状出現頻度</h2>
        <select id="period-select" class="period-select">
          <option value="all">全期間</option>
          <option value="month">過去30日</option>
          <option value="week">過去7日</option>
        </select>
      </div>
      <canvas id="symptomChart"></canvas>
    </div>
  </div>
  <footer style="text-align: center; margin-top: 30px; padding: 15px 0; color: #666; font-size: 14px;">
    体調メモ＆症状ログ v1.1.0
  </footer>
  <script src="script.js"></script>
</body>
</html>
